{% extends 'temp.html'%} {% block title %} Главная страница {% endblock %} {%
block script %}
<!-- <script src="https://api-maps.yandex.ru/2.0-stable/?apikey=76feaae7-5b5d-4246-9b92-2f897ae1c311&load=package.full&lang=ru-RU" type="text/javascript"></script> -->
<!-- <script src="http://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script> -->
<script type="text/javascript">
  ymaps.ready(init);
  function init() {
    var myMap = new ymaps.Map("myMap", {
      center: [55.76, 37.64],
      zoom: 7
    });

    var myPlaceMark = new ymaps.Placemark([55.76, 37.64], {
      iconContent: 'Москва', // текст на иконке
    }, {
      present: 'twirl#blueStretchyIcon' // тип иконки
    });
    myMap.geoObjects.add(myPlaceMark);
  }
</script>
{% endblock%} {% block body %}
<div class="left_side">
  <h2>Фильтр:</h2>
  <form>
    <p>
      <label class="cat_input" for="date">с: </label>
      <input type="date" class="cat_input" id="date1" name="date" value="{{ l_d }}"/>
    </p>
    <p>
      <label class="cat_input" for="date"> по: </label>
      <input type="date" class="cat_input" id="date2" name="date" value="{{ r_d }}"/>
    </p>
    <br />
    <p>
      <br />Упорядочить по местоположению?
      <input type="checkbox" id="place_order" {% if order_loc %} checked {% endif %} name="html5"/>
    </p>
    <p>
      <button type="submit" onclick="updateForm()">Поиск</button>
    </p>
  </form>
  <script>
    
    function updateForm() {
      var left_date = document.getElementById("date1").value;
      var right_date = document.getElementById("date2").value;
      var order = document.getElementById("place_order").checked;
      var data = "" + left_date + "/" + right_date + "/" + order;
      $.post("/process_data/", {'data':data});
    }

  </script>
  <form>
    <div class="scrollable">
      <table>
        {% for i in range(strings|length) %}
        <tr data-unique-id="{{ i }}">
          <td><a href="#" class="string-link">{{ strings[i] }}</a></td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <script>
        var articles = {{ articles | safe}};
        var places = {{ places | safe }}
        document.querySelectorAll('.string-link').forEach(item => {
            item.addEventListener('click', event => {
                // Обработчик нажатия на каждую строку
              var uniqueId = parseInt(event.target.closest('tr').dataset.uniqueId, 10);
              // alert('Вы нажали на строку с уникальным ID: ' + uniqueId);
              var article = articles[uniqueId];
              document.getElementById('field_text').textContent = article;
              var place = places[uniqueId];
              
            });
        });
    </script>
    <br /><br /><br /><br /><br /><br /><br />
    <div class="chosen_text" id="field_text">
      <p>Здесь будет отображаться выбранный текст.</p>
      <!-- <p>{{ articles[0] }}</p> -->
    </div>
  </form>
</div>
{% endblock %} {% block maps%}
<div id="myMap"></div>
{% endblock %}